# URL과 리소스

**URL**(Uniform Resource Locator)은 *인터넷의 리소스를 가리키는 표준이름*이다.

## 인터넷의 리소스 탐색하기

**URL**은 브라우저가 정보를 찾는데 필요한 *리소스의 위치*를 가리킨다. 

- 사용자가 브라우저에 URL을 입력 → 브라우저는 화면 뒤에서 사용자가 원하는 리소스를 얻기 위해서 적절한 프로토콜을 사용하여 메시지를 전송

`http://www.shop-guitar.com/fender/telecaster.html` 이라는 URL을 불러오고 싶다고 가정하면,

- `http`: URL의 **스킴**. 스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다. (어떻게)
- `www.shop-guitar.com`: **서버의 위치**. 웹 클라이언트가 *리소스가 어디에 호스팅되어 있는지* 알려준다. (어디에)
- `/fender/telecaster.html`: **리소스의 경로**. 서버에 존재하는 로컬 리소스들 중에서 *요청받은 리소스가 무엇인지* 알려준다. (무엇을)

대부분의 URL은 **'스킴://서버위치/경로'** 구조로 이루어져 있다.

## URL 문법

대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.

`<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>`

URL의 가장 중요한 세 가지 컴포넌트는 스킴, 호스트, 경로다.

- 스킴
    - 어떤 프로토콜을 사용하여 서버에 접근해야 하는지 가리킨다
- 사용자 이름
    - 몇몇 스킴은 리소스에 접근을 하기 위해 사용자 이름을 필요로 한다
- 비밀번호
    - 사용자의 비밀번호
    - 사용자 이름에 콜론(:)으로 이어서 기술한다
- 호스트
    - 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소
- 포트
    - 리소스를 호스팅하는 서버가 열어놓은 포트번호
    - HTTP의 기본 포트: 80
- 경로
    - 이전 컴포넌트와 '/'로 구분
    - 서버 내 리소스가 서버 어디에 있는지 가리킨다
    - 문법은 서버와 스킴에 따라 다르다
- 파라미터
    - 특정 스킴들에서 입력 파라미터를 기술
    - 이름/값을 쌍으로 가진다
    - 파라미터는 다른 파라미터나 경로의 일부와 세미콜론(;)으로 구분하며, 여러 개를 가질 수 있다
- 질의
    - 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰인다
    - URL의 끝에 '?'로 구분
- 프래그먼트
    - 리소스의 조각이나 일부분을 가리키는 이름
    - URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 않는다
    - 클라이언트에서만 사용한다
    - URL의 끝에서 '#' 문자로 구분

### 스킴: 사용할 프로토콜

- **스킴**
    - 주어진 리소스에 **어떻게 접근하는지** 알려주는 정보다.
    - *어떤 프로토콜을 사용하여 리소스를 요청해야 하는지* 알려준다.
    - 대소문자를 가리지 않는다.
    - URL의 나머지 부분들과 첫 번째 ':' 문자로 구분한다.

### 호스트와 포트

- **호스트** 컴포넌트
    - 접근하려고 하는 **리소스를 가지고 있는 인터넷상의 호스트 장비**를 가리킨다.
    - *호스트 명이나 IP 주소*로 제공한다.
- **포트** 컴포넌트
    - **서버가 열어놓은 네트워크 포트**를 가리킨다.
    - 내부적으로 TCP 프로토콜을 사용하는 HTTP는 기본 포트로 80을 사용한다.

### 사용자 이름과 비밀번호

사용자 이름과 비밀번호를 요구하는 좋은 예로 FTP 서버가 있다.

만약 사용자 이름과 비밀번호를 기술하지 않고 FTP URL에 접근하면, 기본 사용자 이름 값으로 'anonymous', 비밀번호는 브라우저 고유 기본값을 사용한다.

### 경로

- **경로** 컴포넌트
    - **리소스가 서버의 어디에 있는지** 알려준다.
    - 유닉스 파일 시스템의 파일 경로와 유사하다.
    - 서버가 리소스의 위치를 찾는데 사용하는 정보다.
    - HTTP URL에서 경로 컴포넌트는 '/' 문자를 기준으로 경로조각으로 나뉜다.

### 파라미터

- **파라미터** 컴포넌트
    - 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.
    - 이름/값 쌍의 리스트로 URL 나머지 부분들로부터 **';' 문자**로 구분하여 URL에 기술한다.

### 질의 문자열

리소스 형식의 범위를 좁히기 위해 질문이나 질의를 받을 수 있다. 편의상 많은 게이트웨이가 '&'로 나뉜 '이름=값' 쌍 형식의 질의 문자열을 원한다.

예) `http://www.shop-guitar.com/inventory-check.cgi?item=1004&color=white`

### 프래그먼트

리소스의 특정 부분을 가리킬 수 있도록, URL은 **리소스 내의 조각을 가리킬** 수 있는 **프래그먼트** 컴포넌트를 제공한다.

예를 들어 URL은 HTML 문서에 있는 특정 이미지나 일부분을 가리킬 수 있다.

예) `http://www.shop-guitar.com/tools.html#straps`

HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에, 클라이언트는 서버에 프래그먼트를 전달하지 않는다. 브라우저가 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 보고자 하는 리소스의 일부를 보여준다.

## 단축 URL

많은 브라우저가 사용자가 기억하고 있는 URL 일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL '**자동 확장**'을 지원한다.

### 상대 URL

상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는, 기저(base)라고 하는 다른 URL을 사용해야 한다.

상대 URL은 URL을 짧게 표기하는 방식이다. 

예)

- Base URL: `http://www.shop-guitar.com/guitars.html`
- 상대 URL: `./straps.html`

→ 새로운 절대 URL: `http://www.shop-guitar.com/straps.html`

### URL 확장

- 호스트 명 확장
    - 호스트 명 확장 기능을 지원하는 브라우저는 단순한 휴리스틱만을 사용해서 입력한 호스트 명을 전체 호스트 명으로 확장할 수 있다.
    - 예) 주소 입력란에 'naver'를 입력하면, 브라우저는 호스트 명에 자동으로 'www.'와 '.com'을 붙여서 'www.naver.com'을 만든다.
- 히스토리 확장
    - 과거에 사용자가 방문했던 URL의 기록을 저장해 놓는다.
    - URL을 입력하면 그 입력된 URL의 앞 글자들을 포함하는 완결된 형태의 URL들을 선택하게 해준다.

## 안전하지 않은 문자

안전한 전송이란, 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다. 전자메일에 사용되는 **SMTP**(Simple Mail Transfer Protocol)같은 프로토콜은 **특정 문자를 제거할 수도 있는 전송 방식**을 사용한다. 

문자가 제거되는 일을 피하고자 **URL은 상대적으로 작고 일반적으로 안전한 알파벳 문자만 포함하도록 허락**한다.

이스케이프라는 기능을 추가하여, 안전하지 않은 문자를 안전한 문자로 인코딩할 수 있게 하였다.

### 인코딩 체계

인코딩은 안전하지 않은 문자를 퍼센티지 기호(%)로 시작해, ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 '이스케이프' 문자로 바꾼다.

예)

- '~' 문자 → ASCII 코드: 126(0x7E) → URL: `http://shop-guitar.com/%7Efender`

### 문자 제한

몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있다.